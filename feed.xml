<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>生活筆記</title>
    <link href="https://felixhoi.github.io/felixhoi.github.io/feed.xml" rel="self" />
    <link href="https://felixhoi.github.io/felixhoi.github.io" />
    <updated>2020-10-05T10:20:42+08:00</updated>
    <author>
        <name>Felix Hoi</name>
    </author>
    <id>https://felixhoi.github.io/felixhoi.github.io</id>

    <entry>
        <title>與膽固醇初交鋒</title>
        <author>
            <name>Felix Hoi</name>
        </author>
        <link href="https://felixhoi.github.io/felixhoi.github.io/yu-dan-gu-chun-chu-jiao-feng.html"/>
        <id>https://felixhoi.github.io/felixhoi.github.io/yu-dan-gu-chun-chu-jiao-feng.html</id>
            <category term="膽固醇"/>
            <category term="健康"/>

        <updated>2020-10-05T10:20:42+08:00</updated>
            <summary>
                <![CDATA[
                    今年五月份在衛生局做了身體檢查，體檢的醫生說我的膽固醇過高，但暫時不需要吃藥，需要控制飲食及多運動，需要轉介去成人保健繼續跟進。體檢醫生說不需要吃藥，所我也沒放在心上，覺得沒有大碍。沒想到去了成人保健，醫生告訴我需要吃藥，我說＂是不是會有副作用，不吃行嗎？＂，醫生回答，道：＂你不吃，我也逼不了你。＂。這下有點把我嚇到了，感覺長期吃藥是老人家的事情，這事情離我太遠，一時接受不了。然後醫生讓我明年一月份再來做檢查，我說可以早一點嗎？醫生又回我：＂這不算嚴重，明年再來吧＂。我心裡是想，萬一飲食控制不能把膽固醇降不下，那還得吃藥，明年會不會太久。。。。。。然後就開始上網查到底膽固醇是啥玩意。本人沒有受過任何醫學培訓，以下內容來自互聯網，並不作任何醫療建議，謹作個人記錄。這篇講得不錯，可以直接看這裡　https://zhuanlan.zhihu.com/p/117245072膽固醇是什麼？『膽固醇和三酯甘油是血液內重要的脂肪。膽固醇是身體製造細胞膜、腦神經細胞和膽汁的主要成分，人體更能利用膽固醇製造需的維他命D所和各種重要的荷爾蒙。人的身體能生產維持生命所需的膽固醇，但亦可以從食物中吸收。在血液中，膽固醇是以脂蛋白（Lipoproteins）的形式被運送到身體各部分。』所以，膽固醇不是壞東西，它很重要，據說大腦佔人體重量約2.5%，而人體有百份之二十的膽固醇都在大腦裡。膽固醇與脂蛋白有什麼關係？『脂蛋白大致上可分為以下幾種： ‧極低密度脂蛋白（VeryLowDensityLipoproteins，VLDL） ‧低密度脂蛋白（LowDensityLipoproteins，LDL） ‧高密度脂蛋白（HighDensityLipoproteins，HDL）』『高密度脂蛋白（HDL）、低密度脂蛋白（LDL）與極低密度脂蛋白（VLDL），這些脂蛋白如同貨車一般，會在血液中運行，攜帶著三酸甘油酯、膽固醇與脂溶性營養素至全身各地，而各種脂蛋白所攜帶的貨物比例不一，目的地也不同，其中低密度脂蛋白（LDL）是主要運送膽固醇的脂蛋白，而高密度脂蛋白則是將散落各地的膽固醇運回肝臟代謝，因此又被稱為好的膽固醇。低密度脂蛋白因為在血液中容易被自由基攻擊，進一步容易黏附在血管壁上，因此長期低密度脂蛋白的濃度過高時，就容易導致心血管疾病的發生。』『膽固醇不溶於水，與低密度脂蛋白及高密度脂蛋白結合，隨血液運行。如果低密度脂蛋白比高密度脂蛋白多出太多，在血液中運行的膽固醇就會多於細胞所需的量，這時過剩的膽固醇會積聚在血管壁上。這個過程叫做動脈粥樣硬化，會導致心臟病。』所以，評估導致心血管疾病的風險，不能只看某個膽固醇指數，綜合各指數進行評估會更準確。讀懂體檢報表如果你開通了澳門公共服務一戶通帳戶，可以在一戶通手機APP裡『我的健康』查看自己在衛生局做過的化驗報告，以下是我在五月份做的膽固醇化驗報告。膽固醇報告Total Cholesterol 是總膽固醇，分了三個等級，Desirable 理想、Borderline 邊界線、High 高。最後一個Lipid disorder : 5.2 -7.8 mmol/L, if HDL: &lt;0.9 mmol/L ，如果總膽固醇在5.2 -7.8 且 HDL 低於0.9&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <div class="_2cuy _3dgx _2vxa">今年五月份在衛生局做了身體檢查，體檢的醫生說我的膽固醇過高，但暫時不需要吃藥，需要控制飲食及多運動，需要轉介去成人保健繼續跟進。體檢醫生說不需要吃藥，所我也沒放在心上，覺得沒有大碍。</div>
<div class="_2cuy _3dgx _2vxa">沒想到去了成人保健，醫生告訴我需要吃藥，我說＂是不是會有副作用，不吃行嗎？＂，醫生回答，道：＂你不吃，我也逼不了你。＂。這下有點把我嚇到了，感覺長期吃藥是老人家的事情，這事情離我太遠，一時接受不了。然後醫生讓我明年一月份再來做檢查，我說可以早一點嗎？醫生又回我：＂這不算嚴重，明年再來吧＂。我心裡是想，萬一飲食控制不能把膽固醇降不下，那還得吃藥，明年會不會太久。。。。。。</div>
<div class="_2cuy _3dgx _2vxa">然後就開始上網查到底膽固醇是啥玩意。本人沒有受過任何醫學培訓，以下內容來自互聯網，並不作任何醫療建議，謹作個人記錄。</div>
<div class="_2cuy _3dgx _2vxa"><a href="https://zhuanlan.zhihu.com/p/117245072?fbclid=IwAR31O-ojfeXB5nvwy4P_rMTLSoEDDY7f1pPcIvUm7KpboTsOO_m23j7GW-U" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F117245072%3Ffbclid%3DIwAR31O-ojfeXB5nvwy4P_rMTLSoEDDY7f1pPcIvUm7KpboTsOO_m23j7GW-U&amp;h=AT1wMxy_CIlLtAq7SOrtMLYaKU3p4TP6NmhQIS7_EugBqn_f0AUWfAnfiWKSxpfKtMFDNe4iEVBsQxUphVWAqKxNfuxAcyCWb6tAbMlI48NWesO7Kj1XMgD22RaJTg-E1tYasFyZJn7bV4vkFrRe7uxI">這篇講得不錯，可以直接看這裡　https://zhuanlan.zhihu.com/p/117245072</a></div>
<h3 class="_2cuy _50a1 _2vxa">膽固醇是什麼？</h3>
<div class="_2cuy _3dgx _2vxa">『膽固醇和三酯甘油是血液內重要的脂肪。膽固醇是身體製造細胞膜、腦神經細胞和膽汁的主要成分，人體更能利用膽固醇製造需的維他命D所和各種重要的荷爾蒙。人的身體能生產維持生命所需的膽固醇，但亦可以從食物中吸收。在血液中，膽固醇是以脂蛋白（Lipoproteins）的形式被運送到身體各部分。』</div>
<div class="_2cuy _3dgx _2vxa">所以，膽固醇不是壞東西，它很重要，據說大腦佔人體重量約2.5%，而人體有百份之二十的膽固醇都在大腦裡。</div>
<h3 class="_2cuy _50a1 _2vxa">膽固醇與脂蛋白有什麼關係？</h3>
<div class="_2cuy _3dgx _2vxa">『脂蛋白大致上可分為以下幾種：<span class="_4yxo"><br></span>‧極低密度脂蛋白（VeryLowDensityLipoproteins，VLDL）<br>‧低密度脂蛋白（LowDensityLipoproteins，LDL）<br>‧高密度脂蛋白（HighDensityLipoproteins，HDL）』</div>
<div class="_2cuy _3dgx _2vxa">『高密度脂蛋白（HDL）、低密度脂蛋白（LDL）與極低密度脂蛋白（VLDL），這些脂蛋白如同貨車一般，會在血液中運行，攜帶著三酸甘油酯、膽固醇與脂溶性營養素至全身各地，而各種脂蛋白所攜帶的貨物比例不一，目的地也不同，其中低密度脂蛋白（LDL）是主要運送膽固醇的脂蛋白，而高密度脂蛋白則是將散落各地的膽固醇運回肝臟代謝，因此又被稱為好的膽固醇。<span class="_4yxo">低密度脂蛋白因為在血液中容易被自由基攻擊，進一步容易黏附在血管壁上，因此長期低密度脂蛋白的濃度過高時，就容易導致心血管疾病的發生</span>。』</div>
<div class="_2cuy _3dgx _2vxa">『膽固醇不溶於水，與低密度脂蛋白及高密度脂蛋白結合，隨血液運行。<span class="_4yxo">如果</span><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BD%258E%25E5%25AF%2586%25E5%25BA%25A6%25E8%2584%2582%25E8%259B%258B%25E7%2599%25BD%3Ffbclid%3DIwAR0V3_kdUNbk4qWNIhovI9QJNf-ZVSlWgLt4i7YHKxue6hGuYEswWi0_S9U&amp;h=AT3Wp4ExpiZxAJMBLK51eQtLWpYMyrqOFLcQKJZy1iYakboSmxrXn4CJ7EdjbsOnmyQxkE1ZxHmqzt1zCr0Mta0gLIyt3Efq2myL58CqIT6O09IZOVcaZ3Oxj8XfA6_Qu3r2KF3_zadvGebIQH-NR1Ub" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy"><span class="_4yxo">低密度脂蛋白</span></a><span class="_4yxo">比</span><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E9%25AB%2598%25E5%25AF%2586%25E5%25BA%25A6%25E8%2584%2582%25E8%259B%258B%25E7%2599%25BD%3Ffbclid%3DIwAR3B76Gv4Ul0G_riFOFn0ohO123v9fsXfO7PmUQqAQXh6g1zUV5PWMB_wek&amp;h=AT2bH2N5vcGK6AnUTOcnnyCayirN7zHHxa1J81K4zmUck8MJBqEfpyahcKFRBgz9YKakqUyfdtGlcuIiH_8-a5E2Aod0ATd3KblHmczq8rhJ3-UD40UE2LOT0uswiihGO8JBcKMgCSABIxgaIhIG0szH" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy"><span class="_4yxo">高密度脂蛋白</span></a><span class="_4yxo">多出太多</span>，在血液中運行的膽固醇就會多於細胞所需的量，這時過剩的膽固醇會積聚在血管壁上。這個過程叫做<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%258A%25A8%25E8%2584%2589%25E7%25B2%25A5%25E6%25A0%25B7%25E7%25A1%25AC%25E5%258C%2596%3Ffbclid%3DIwAR03UVrIqhX-7sZ8Q4-EFADj3GLP2DZNi_YUoGS6gfoFDdMXJjcp0OUuHqg&amp;h=AT30Eqhsx3eAgy-Qu4hMJNLnl3k_vJjfKPz9QigIC7NHQdnPM6OGDBM_-sIrgTqKZhcSGEUrusV9AkQOwQ6eqMifhP4ULtZX-dn_wfa2_Q010uqn0XmO85Z9-7M8SFxFtShbwppu4QNd_rxrY2u9Dccg" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">動脈粥樣硬化</a>，會導致<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%25BF%2583%25E8%2584%258F%25E7%2597%2585%3Ffbclid%3DIwAR0YMAd4xzqCvpm5OTOE9wcfx7BDaaDYaLlvMYqY7Lcml_VMIRxM36W8NZI&amp;h=AT1mQuOtwS5Fxg_9rCvqM03fiX-eaV7wkk-Hqh-Z6RaB_hwOLJeo6OL0AivIt1YdRrVD7iSA-OSK0r2RsJluAH-R30Kb2V8YWDP8VFhnTplO4aFK_wzBCsupho5-ObElsvhmb92hLx_QU71DX6Sd7dGP" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">心臟病</a>。』</div>
<div class="_2cuy _3dgx _2vxa">所以，評估導致心血管疾病的風險，不能只看某個膽固醇指數，綜合各指數進行評估會更準確。</div>
<h3 class="_2cuy _50a1 _2vxa">讀懂體檢報表</h3>
<figure class="_2cuy _4nuy _2vxa">
<div class="_h2x"><figure class="_h2z _297z _usd img"><img loading="lazy" id="u_0_c"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/114890927_10223442392227547_45232419901796791_o.jpg?_nc_cat=106&amp;_nc_sid=32a93c&amp;_nc_ohc=8Vdn1cJ2r4QAX8q0684&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=a6dda5b0ad58ba6435970d98b8c6a27b&amp;oe=5F9FA53C" data-is-external-image="true"  alt=""></figure></div>
</figure>
<div class="_2cuy _3dgx _2vxa">如果你開通了澳門公共服務一戶通帳戶，可以在一戶通手機APP裡『我的健康』查看自己在衛生局做過的化驗報告，以下是我在五月份做的膽固醇化驗報告。</div>
<div class="_2cuy _3dgx">膽固醇報告</div>
<div class="_2cuy _3dgx _2vxa">Total Cholesterol 是總膽固醇，分了三個等級，Desirable 理想、Borderline 邊界線、High 高。最後一個Lipid disorder : 5.2 -7.8 mmol/L, if HDL: &lt;0.9 mmol/L ，如果總膽固醇在5.2 -7.8 且 HDL 低於0.9 算是有病症了，我HDL 0.91 差一點點就掉進去了，也属於高風險。</div>
<div class="_2cuy _3dgx _2vxa">HDL Cholesterol 高密度脂蛋白膽固醇，分為三個等級，且區分性別，No risk 沒風險、Moderate risk 中風險、High risk 高風險。 我0.91處於中風險。</div>
<div class="_2cuy _3dgx _2vxa">LDL Cholesterold(calculated)，有五個等級，Optimal 理想，Near optimal 接近理想、Borderline 邊界線，High 高風險，Very high非常高風險。我4.6，又拿了高風險。這裡寫著(calculated) 是說這不是化驗出來的，通過計算算出來的，醫院為了節省成本，臨床上大部份情況下應該也是較準的，</div>
<div class="_2cuy _3dgx _2vxa">低密度脂蛋白膽固醇=總膽固醇(6.4)-高密度脂蛋白膽固醇(0.91)-極低密度脂蛋白(0.886)= 4.6</div>
<div class="_2cuy _3dgx _2vxa">Cholesterol VLDL 極低密度脂蛋白 在0.123 - 1.036 範圍內，正常。</div>
<h3 class="_2cuy _50a1 _2vxa">LDL真的是「壞」的膽固醇嗎？</h3>
<div class="_2cuy _3dgx _2vxa">『接下來讓我們來瞭解一下高密度脂蛋白（HDL），HDL會將身體周邊過多的膽固醇運送回肝臟，加以代謝分解，因此被稱為「好」的膽固醇，醫學界開始關注起HDL相對於LDL的濃度，也就是說，只要HDL夠高，罹患心血管疾病的機會便會降低，相反的LDL濃度過高，就會提高心血管疾病的發生率，於是所有降血脂的藥物由過去針對降低總膽固醇，到現在則是著重在降低LDL濃度的statin類藥物，然而根據醫學統計，statin類藥物有效的降低了LDL的濃度，卻僅降低約1%不到的心血管疾病所造成的死亡率。</div>
<div class="_2cuy _3dgx _2vxa">科學家更進一步發現，沈積在血管壁的斑塊，雖然有LDL的成分，<span class="_4yxo _4yxp">但卻是已經氧化的低密度脂蛋白（oxLDL），oxLDL會卡在血管壁上，但LDL並不會，因此oxLDL才是真正的「壞掉」的膽固醇，血液檢查oxLDL值，是最能真正評估心血管疾病的風險</span><span class="_4yxp">，</span>同時是決定是否需要服用降血脂藥物的重要指標，一味的以藥物把LDL濃度降到過低，卻反而會影響膽固醇的運送，讓需要膽固醇參與的生理活動受阻。』</div>
<div class="_2cuy _3dgx _2vxa">『既然氧化低密度脂蛋白(Ox-LDL)才是造成疾病的要因，為何醫院診所還是驗 低密度脂蛋白-膽固醇(LDL-C)?</div>
<ul class="_5a_q _5yj1" dir="ltr">
<li class="_2cuy _509q _2vxa">由於氧化低密度脂蛋白(Ox-LDL) 的檢測技術較複雜，檢驗量少，導致成本頗高，導致檢測費用較昂貴</li>
<li class="_2cuy _509q _2vxa">低密度脂蛋白-膽固醇(LDL-C) 臨床上已經使用多年，<span class="_4yxo _4yxp">且有充足的實證醫學佐證</span>，很適合大多數人來使用</li>
<li class="_2cuy _509q _2vxa">低密度脂蛋白-膽固醇(LDL-C) 還可以利用數學公式推倒出來，更省錢。</li>
<li class="_2cuy _509q _2vxa">因此便宜、統計數據充足的低密度脂蛋白(LDL)是目前臨床使用率極高的心血管風險因子。</li>
<li class="_2cuy _509q _2vxa">對於大多數人的<span class="_4yxo">高醣飲食</span>來說，低密度膽固醇(LDL-C)與心血管疾病有極高的相關性，且加上成本考量，臨床多以低密度脂蛋白-膽固醇(LDL-C)來預警。</li>
<li class="_2cuy _509q _2vxa">然而，仍有許多人低密度脂蛋白-膽固醇(LDL-C)正常，但氧化低密度脂蛋白(Ox-LDL)偏高』</li>
</ul>
<div class="_2cuy _3dgx _2vxa">這張圖不錯，記下了重點。</div>
<figure class="_2cuy _4nuy _2vxa">
<div class="_h2x"><figure class="_h2z _297z _usd img"><img loading="lazy" id="u_0_d"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/116487764_10223442395747635_5883826159661380805_o.jpg?_nc_cat=101&amp;_nc_sid=32a93c&amp;_nc_ohc=eMkT-Azss1AAX-YEvlJ&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=5f25cc1cb08bc8e22ef8b58aac6cc347&amp;oe=5FA1133A" data-is-external-image="true"  alt=""></figure></div>
</figure>
<div class="_2cuy _3dgx _2vxa">在得知自己膽固醇過高後，開始了飲食控制及多運動，效果也不錯，各膽固醇指數都降到正常水平。</div>
<ol class="_5a_q _509r" dir="ltr">
<li class="_2cuy _509s _2vxa">不吃煎炸食物，不吃零食，不喝廢水，若喝飲品的話，只喝低糖豆奶，一個星期喝三盒左右。</li>
<li class="_2cuy _509s _2vxa">星期一至五，每天喝一杯綠茶。另外再喝一些奇亞籽，用開水泡10分鐘。＇</li>
<li class="_2cuy _509s _2vxa">每天兩份水果，一般是兩個蘋果。</li>
<li class="_2cuy _509s _2vxa">多吃菜，星期一至五中午都是吃飯和菜。其他餐也是多菜，肉少吃。</li>
<li class="_2cuy _509s _2vxa">每天吃８顆堅果，腰果、杏仁。</li>
<li class="_2cuy _509s _2vxa">每天早餐吃一碗麥皮，一半是原片麥皮，再加點提子干。</li>
<li class="_2cuy _509s _2vxa">一星期至少五次跑步，每次至少40分鐘。</li>
<li class="_2cuy _509s _2vxa">保持心情舒暢，之前工作壓力較大，可能也有關係。</li>
</ol>
<div class="_2cuy _3dgx _2vxa">飲食可參考<a href="https://l.facebook.com/l.php?u=http%3A%2F%2Fwww.ccgh.com.tw%2FQAdocument%2F28010%2F2018030300022018.02.01%25E7%2587%259F%25E9%25A4%258A%25E8%25AA%25B2_%25E9%25AB%2598%25E8%2586%25BD%25E5%259B%25BA%25E9%2586%2587%25E8%25A1%2580%25E7%2597%2587%25E9%25A3%25B2%25E9%25A3%259F.pdf%3Ffbclid%3DIwAR0NyQDL-yF61FjbzkRT_K1Jjv8-mCvBIXF2HNuXYFW-XGmhtCGtEY-eT_c&amp;h=AT2wI6k-c_sQQd69XOhcb3nGh6Yr0BHFHKDY9FXssLi1Afbx36TFG2WqudBbE5024wi9V4zsCTv3gp2KafweGiD3jIpt_dIV9N2vKHjDfQNPb0e7-8VM3PL1Cr_rAS0uvFqoiHLhj9lPKVRSPwQauSVo" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">http://www.ccgh.com.tw/QAdocument/28010/2018030300022018.02.01%E7%87%9F%E9%A4%8A%E8%AA%B2_%E9%AB%98%E8%86%BD%E5%9B%BA%E9%86%87%E8%A1%80%E7%97%87%E9%A3%B2%E9%A3%9F.pdf</a></div>
<div class="_2cuy _3dgx _2vxa">大約35天後，再次做了檢查，效果理想。</div>
<figure class="_2cuy _4nuy _2vxa">
<div class="_h2x _h2y"><figure class="_h2z _297z _usd img"><img loading="lazy" id="u_0_e"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/116455547_10223442276384651_8029956680139113136_o.jpg?_nc_cat=101&amp;_nc_sid=32a93c&amp;_nc_ohc=1jcrwEuVvcAAX-3uG-v&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=4bd28065a28aadc16df2f38b99700e41&amp;oe=5F9E66A8" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">第二次體檢</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">參考：</div>
<div class="_2cuy _3dgx _2vxa"><a href="https://www.commonhealth.com.tw/blog/blogTopic.action?nid=1883&amp;fbclid=IwAR3Fb1QQH9MsgKcz8q_JWbeplukPrx2VaWh-B7V9tElrMSOT0p-oFgScp-o" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.commonhealth.com.tw%2Fblog%2FblogTopic.action%3Fnid%3D1883%26fbclid%3DIwAR3Fb1QQH9MsgKcz8q_JWbeplukPrx2VaWh-B7V9tElrMSOT0p-oFgScp-o&amp;h=AT1FlPFftySGPvj9ifbMwAA2zbR0HyAC4LyVBbt42dLZka5AqrBKvepPNAsV1SBL1dIGNrorkqI-q_-jbcze0hUTUDuS1qnjHytNcaeaUTHdp3OCiNpc53fx4mpd2WCuYlzJFAVXqT1nlUNsWB35ulTT">https://www.commonhealth.com.tw/blog/blogTopic.action?nid=1883</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="https://www.hpa.gov.tw/Pages/Detail.aspx?nodeid=1425&amp;pid=8450&amp;fbclid=IwAR2YWn6dFdQQyAp616mMDq3mVXEOZ_6lK3uDnZPUL9JKG9SsMV6PQLXd3is" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.hpa.gov.tw%2FPages%2FDetail.aspx%3Fnodeid%3D1425%26pid%3D8450%26fbclid%3DIwAR2YWn6dFdQQyAp616mMDq3mVXEOZ_6lK3uDnZPUL9JKG9SsMV6PQLXd3is&amp;h=AT3ZApkvSWu-Psz0HAQw9zMkUqWTNIjEZrgtzEEP23pK_n97cNa9NWLab34m_16cg5xPNJxjH0p1z6AxCXQZUoFQLIQTv-ZL-tUsquFMArCgwMpXi6Zdn7wMpfi_l2tNQW2HgAE7c2-7UbpXexdQlHmA">https://www.hpa.gov.tw/Pages/Detail.aspx?nodeid=1425&amp;pid=8450</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="https://www.haodf.com/zhuanjiaguandian/yufengli_17497.htm?fbclid=IwAR2hGe-OnIVtVVFeH-sv4TBprzKsEmC00dhctMKcLSoi-EYXwZd29SZDhjs" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.haodf.com%2Fzhuanjiaguandian%2Fyufengli_17497.htm%3Ffbclid%3DIwAR2hGe-OnIVtVVFeH-sv4TBprzKsEmC00dhctMKcLSoi-EYXwZd29SZDhjs&amp;h=AT1leR3bweumt-KUqnTCkpafi1_lCbv6eNPFE1xatMVQX3IvjYgcy1eIVjlKV8ulh_hHnQVD8-IgK743OEdaq8pTOsXv8lhvmLGoDnFnHKb365MEDgyhYG_4HwjXa5UaY-UgsgXO_5ONCoTzM-3qbfTG">https://www.haodf.com/zhuanjiaguandian/yufengli_17497.htm</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="http://www.3phk.com/v5article.asp?id=688&amp;section=drug&amp;fbclid=IwAR21oS4IeH7qh4GSKHMOwkmHa51EtkUTEMEcOh-docN5MR_DW_IYttSS5bE" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=http%3A%2F%2Fwww.3phk.com%2Fv5article.asp%3Fid%3D688%26section%3Ddrug%26fbclid%3DIwAR21oS4IeH7qh4GSKHMOwkmHa51EtkUTEMEcOh-docN5MR_DW_IYttSS5bE&amp;h=AT36h2Do6SJRyGVzPKb-N9Z6ZfuNJzKtRY8kC6_eUQjc6pjUGNvuT71r3JRkQwMBYCULL4GOm-jZ-mJ1F4DpEDmdWEn7OUoZWZKtUNcGl54ATwXz1K97ETTyyIzUnCZ251pHexmgIrGI4qC9T5EtWym4">http://www.3phk.com/v5article.asp?id=688&amp;section=drug</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.osgeo.cn%2Fapp%2Fsc813%3Ffbclid%3DIwAR1ur0WZPYo0mg26eQf3iQgTgHgwXr8c7K-Yu6a4CT06hFldVNXcEJzeUdY&amp;h=AT03Re3DCyieQ92w985fDJuS2w5VYkuEt6vwT-SGzU2L6c2dnkdiJm_Fg8FmsqqBBmoqS38ZbtGlMRUcuSH4dr-LlyflnFrIrOW6wkrENKCI8q8k1qGM6icFd7qKQpCGVEyK_K6hD1VvKQJSJYMF32_J" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://www.osgeo.cn/app/sc813</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="https://education.questdiagnostics.com/faq/FAQ164-retired0?fbclid=IwAR2zKPLEE2WhMsf-QrF26Ape9b8gOXFKlntDFhZF0r67oPObvz_-4UtKwT0" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Feducation.questdiagnostics.com%2Ffaq%2FFAQ164-retired0%3Ffbclid%3DIwAR2zKPLEE2WhMsf-QrF26Ape9b8gOXFKlntDFhZF0r67oPObvz_-4UtKwT0&amp;h=AT27pAiT1pIGG4BxcUuOoRFwXZl1q0CwZ3bTBw-oL1NHnfT2TMYyZSv5Kbzx2l8qqyihslQ8JYMNu2skbSPaOgodjR8_WI6TNXiC87q9s3sR--SYy_oCZMDOgYBub-iMhl1HW5oOqLGgoEzVlmH1_RnB">https://education.questdiagnostics.com/faq/FAQ164-retired0</a></div>
<div class="_2cuy _3dgx _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F117245072%3Ffbclid%3DIwAR2eDsFOrfOZM7gye9SwV47QYbWoyVge0TBMebxkl6RkBYizuWsfqPebcc4&amp;h=AT0ILJj3nXvRehjG75k4CldAo_DTZH7Z8EswCrQ9MjL9YDe4itTddstsVjrjGqwoRQoWJmZO-LkeY_Kad_tqSzP1reIbT9LvkARYwXiGSfhE6coahHpnvnVeMmrm1ROEwFA_YtBJda0EBQtcWtvc2BsI" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://zhuanlan.zhihu.com/p/117245072</a></div>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Raspberry Pi 樹莓派控制門鎖</title>
        <author>
            <name>Felix Hoi</name>
        </author>
        <link href="https://felixhoi.github.io/felixhoi.github.io/raspberry-pi-shu-mei-pai-kong-zhi-men-suo.html"/>
        <id>https://felixhoi.github.io/felixhoi.github.io/raspberry-pi-shu-mei-pai-kong-zhi-men-suo.html</id>
            <category term="智能家居 DIY"/>
            <category term="Raspberry Pi 樹莓派"/>

        <updated>2020-10-05T10:13:12+08:00</updated>
            <summary>
                <![CDATA[
                    上一篇的筆記記錄了第一次嘗試使用Raspberry Pi控制電鎖開門，現在記錄一下用Raspberry Pi 控制普通的鎖。普通的門鎖，在門內開鎖是用手去扭或拉一個掣，我們用一條繩的一端綁住鎖上的掣，繩的另一端綁住一個伺服馬達(servomotor)或叫舵機(廣東話不知道是否有另一個名字)，Raspberry Pi 控制舵機轉動把繩往一個方向拉，繼而拉或扭開個掣。會用到硬件：加長針https://detail.tmall.com/item.htm?id=610307765800&amp;spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;_u=u48r4cdc30aPoE 交換機https://detail.tmall.com/item.htm?id=562370892802&amp;spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;_u=u48r4cd6656Raspberry Pi PoE Hat https://item.taobao.com/item.htm?spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;id=575668058521&amp;_u=u48r4cd31a1 servomotor 伺服馬達伺服馬達和普通馬達的區別是，最普通的馬達，有電就會一直轉動，一般用作動力（車輪驅動），伺服馬達裡面就是一個普通馬達和一個位置（角度）偵測器，一般用作方向控制（方向盤），所以伺服馬達可以被指定轉到某個角度就停，可以指定轉到某個角度，代表著我們可以拉動繩子一定的距離。 伺服馬達有三條線，紅色接 5V，即正極。啡色接GND即地線負極。黃色為信號線，接其中一個GPIO，GPIO即可以作為輸入或者輸出都可以，這裡用來控制馬達，所以程式控制的時候要設定為輸出電壓。很多電子元件都是三條線的，其中兩條供電，一條傳輸信號。物理化學都很差的我一開始會想，正負兩條線接在用電器上，閉合形成迴路，但信號線一條怎麼沒有閉合，原來是和電源用同一條地線，簡稱共地。脈衝信號訊號也有分兩種，最簡單的就是短路訊號，像電燈開關，就是讓兩點連接。另一種是脈衝訊號，持續輸入高低有規律交錯的電壓，Raspberry Pi GPIO 輸出為高電位3.3V，低電位為0V。舵機使用的是PMW脈衝寛度調制訊號，比如某信號一個週期是20ms，就是每20ms就是一段重覆的信號，寛度指的是在週期裡高電平的持續總時間，比如10ms，這個比例是10/20，並稱作工作週期 duty cycle。工作週期 Duty Cycle伺服馬達會根據你輸入的PWM信號的工作週期來轉動馬達去到某毎角度，伺服馬達MG995有以下說明：舵机的控制一般需要一个20ms左右的时基脉冲，该脉冲的高电平部分一般为0.5ms-2.5ms范围内的角度控制脉冲部分，总间隔为2ms。以180度角度伺服为例，那么对应的控制关系是这样的：0.5ms--------------0度；duty cycle =&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <div class="_2cuy _3dgx _2vxa">上一篇的筆記記錄了第一次嘗試使用Raspberry Pi控制電鎖開門，現在記錄一下用Raspberry Pi 控制普通的鎖。普通的門鎖，在門內開鎖是用手去扭或拉一個掣，我們用一條繩的一端綁住鎖上的掣，繩的另一端綁住一個伺服馬達(servomotor)或叫舵機(廣東話不知道是否有另一個名字)，Raspberry Pi 控制舵機轉動把繩往一個方向拉，繼而拉或扭開個掣。</div>
<div class="_2cuy _3dgx _2vxa">會用到硬件：</div>
<ul class="_5a_q _5yj1" dir="ltr">
<li class="_2cuy _509q _2vxa">加長針<a href="https://detail.tmall.com/item.htm?id=610307765800&amp;spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;_u=u48r4cdc30a&amp;fbclid=IwAR0ZmFKAuPscp4W2tVbYxilUTS-g7OLmYI1MCB9MkhJK6qUhwVxaCapmKr4" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fdetail.tmall.com%2Fitem.htm%3Fid%3D610307765800%26spm%3Da1z09.2.0.0.4f812e8ds3RIHT%26_u%3Du48r4cdc30a%26fbclid%3DIwAR0ZmFKAuPscp4W2tVbYxilUTS-g7OLmYI1MCB9MkhJK6qUhwVxaCapmKr4&amp;h=AT0LAaTlbTs0w0jZG4nnJ-ebLPnhN1ZpXzQxB1yk_hcQssJIkvxgZJ2UdolBq6hIeeIGHxqwrpblze2m3Zjyyf9cjENWlel3Mbz7feltqUmnrLyL-p_Qvbj-WpS5zSojjQA9s6P14verQ6iGJk4SWLXa">https://detail.tmall.com/item.htm?id=610307765800&amp;spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;_u=u48r4cdc30a</a></li>
<li class="_2cuy _509q _2vxa">PoE 交換機<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fdetail.tmall.com%2Fitem.htm%3Fid%3D562370892802%26spm%3Da1z09.2.0.0.4f812e8ds3RIHT%26_u%3Du48r4cd6656%26fbclid%3DIwAR1SDttUMSvNwpx7kfcqfxJwGWBzShoduNqez-enHpe1fHx8bPq7mpqNtoU&amp;h=AT1PQmMFjTqbQoj4a1PGt6gH3p3IIHnEmcwv3eb0WKppyLg6FVE_N8S7DvYA1up77LYtEZ99yhnUIZl2OzBbKRPcIypMfTzJNxGDzV131GhNT8_CsLE70NTAgdeqTfuubahYYSxdLusxt6-V_XUNrzl3" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://detail.tmall.com/item.htm?id=562370892802&amp;spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;_u=u48r4cd6656</a></li>
<li class="_2cuy _509q _2vxa">Raspberry Pi PoE Hat <a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;id=575668058521&amp;_u=u48r4cd31a1&amp;fbclid=IwAR2OVK4-E588Cw_RRMfs8k0wyheb6HuWg2qmYk5tkCHRc0qBrmUXuo1JocY" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fitem.taobao.com%2Fitem.htm%3Fspm%3Da1z09.2.0.0.4f812e8ds3RIHT%26id%3D575668058521%26_u%3Du48r4cd31a1%26fbclid%3DIwAR2OVK4-E588Cw_RRMfs8k0wyheb6HuWg2qmYk5tkCHRc0qBrmUXuo1JocY&amp;h=AT0OuOc3I_KhuB1iOxbyVeXl8gtzCq2IlYTSB3jOjPTQHhtvKgQ7EbZDtiWgrYQqeBlkQAkDbH_q2dRz2bPZil9A3EVUjHRrEWGcw3azZlR2lR3DsX3xFaTtXKJo6n76Ep0Aae9-kzX60bokSfkWLYI_">https://item.taobao.com/item.htm?spm=a1z09.2.0.0.4f812e8ds3RIHT&amp;id=575668058521&amp;_u=u48r4cd31a1</a></li>
</ul>
<div class="_2cuy _3dgx _2vxa"> </div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_c"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/100986584_10222815412993458_7398888840254980096_n.jpg?_nc_cat=100&amp;_nc_sid=32a93c&amp;_nc_ohc=Tkuize_DwHkAX9BvHsq&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=c321a08599fc5148813366a8de011b2d&amp;oe=5FA03262" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">servomotor 伺服馬達</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">伺服馬達和普通馬達的區別是，最普通的馬達，有電就會一直轉動，一般用作動力（車輪驅動），伺服馬達裡面就是一個普通馬達和一個位置（角度）偵測器，一般用作方向控制（方向盤），所以伺服馬達可以被指定轉到某個角度就停，可以指定轉到某個角度，代表著我們可以拉動繩子一定的距離。</div>
<div class="_2cuy _3dgx _2vxa"> </div>
<div class="_2cuy _3dgx _2vxa"> </div>
<div class="_2cuy _3dgx _2vxa">伺服馬達有三條線，紅色接 5V，即正極。啡色接GND即地線負極。黃色為信號線，接其中一個GPIO，GPIO即可以作為輸入或者輸出都可以，這裡用來控制馬達，所以程式控制的時候要設定為輸出電壓。很多電子元件都是三條線的，其中兩條供電，一條傳輸信號。物理化學都很差的我一開始會想，正負兩條線接在用電器上，閉合形成迴路，但信號線一條怎麼沒有閉合，原來是和電源用同一條地線，簡稱共地。</div>
<figure class="_2cuy _4nuy _2vxa">
<div class="_h2x _h2y"><figure class="_h2z _297z _usd img"><img loading="lazy" id="u_0_d"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/85132124_10222815911445919_5575276087497195520_n.jpg?_nc_cat=101&amp;_nc_sid=32a93c&amp;_nc_ohc=gppUPPx4U8EAX_S26er&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=c0516ea3442c91bd7f246d09dea35fc0&amp;oe=5FA17A2D" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">脈衝信號</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">訊號也有分兩種，最簡單的就是短路訊號，像電燈開關，就是讓兩點連接。另一種是脈衝訊號，持續輸入高低有規律交錯的電壓，Raspberry Pi GPIO 輸出為高電位3.3V，低電位為0V。舵機使用的是<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fblog.everlearn.tw%2F%25e7%2595%25b6-python-%25e9%2581%2587%25e4%25b8%258a-raspberry-pi%2F%25e5%259c%25a8-raspberry-pi-3-model-b-%25e5%2588%25a9%25e7%2594%25a8-pwm-%25e6%258e%25a7%25e5%2588%25b6-led-%25e4%25ba%25ae%25e5%25ba%25a6%3Ffbclid%3DIwAR07L2OaM7UC9tNgDvrfzaWEVb8sqbVLmQLIDYrQX3coei37q8gDLL-8r1k%23comments&amp;h=AT2ZDp0hTJ1zrgLficGULAIJEdNHreSfuaSg0yxRJ3l1Q2YENJLP9P1gZYAeJF7kHebcv46JDjoWVSMaqEErFyU8ZbiMJ5W9LR9PUbf-L6x_3-hQ-z0fKz3tAj4bzFGooZ6QdgUIDWx6u4vM42LrsSal" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">PMW脈衝寛度調制訊</a>號，比如某信號一個週期是20ms，就是每20ms就是一段重覆的信號，寛度指的是在週期裡高電平的持續總時間，比如10ms，這個比例是10/20，並稱作工作週期 duty cycle。</div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_e"  src="https://scontent-hkg4-2.xx.fbcdn.net/v/t1.0-9/100479424_10222815470674900_2199247680478117888_n.jpg?_nc_cat=104&amp;_nc_sid=32a93c&amp;_nc_ohc=7cWEWYLvJ9MAX9IWpWw&amp;_nc_ht=scontent-hkg4-2.xx&amp;oh=63cf06f34cf3cd7232b892b13ecf1556&amp;oe=5F9FB2D1" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">工作週期 Duty Cycle</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">伺服馬達會根據你輸入的PWM信號的工作週期來轉動馬達去到某毎角度，伺服馬達MG995有以下說明：</div>
<div class="_2cuy _3dgx _2vxa">舵机的控制一般需要一个20ms左右的时基脉冲，该脉冲的高电平部分一般为0.5ms-2.5ms范围内的角度控制脉冲部分，总间隔为2ms。以180度角度伺服为例，那么对应的控制关系是这样的：</div>
<ul class="_5a_q _5yj1" dir="ltr">
<li class="_2cuy _509q _2vxa">0.5ms--------------0度；duty cycle = 0.5/20 = 0.5*0.05 = 0.025</li>
<li class="_2cuy _509q _2vxa">1.0ms------------45度；duty cycle = 1/20 = 1*0.05 = 0.05</li>
<li class="_2cuy _509q _2vxa">1.5ms------------90度；duty cycle = 1.5/20 = 1.5 *0.05 = 0.075</li>
<li class="_2cuy _509q _2vxa">2.0ms-----------135度；duty cycle = 2/20 = 2*0.05 = 0.1</li>
<li class="_2cuy _509q _2vxa">2.5ms-----------180度；duty cycle = 2.5/20 = 2.5*0.05 = 0.125</li>
</ul>
<div class="_2cuy _3dgx _2vxa">20ms 時基脈衝，應該是週期要20ms，高電平的在週期裡的時間2.5ms 的話，就會轉動180度。為什麼要定好20ms 呢？週期指的時一段時間重覆部份的時間長度，如果不定好週期，我們怎麼知道要觀察信號多久，任何的通訊都必須要事先協定，這也叫protocol 。Python 的 GPIO.PWM 功能要設定工作週期，180度的話就是 2.5/20 = 2.5 * 0.05 = 0.125，GPIO.PWM 的duty cycle 要設定為12.5。GPIO.PWM 還有頻率要設定，單位是hz，就是在1秒中內要有多少個週期出現，1秒=1000ms，我們知道週期要20ms，那麼頻率就1000/20=50，應該這樣說，我們設定了頻率為50，那麼週期就是20ms。由於GPIO.PWM 功能需要的參數是工作週期，寫個公式把角度換成工作週期：</div>
<div class="_2cuy _3dgx _2vxa">duty cycle = (0.5ms + 2ms * angle / 180)/20ms x 100(%)</div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_f"  src="https://scontent-hkg4-2.xx.fbcdn.net/v/t1.0-9/101372652_10222815592997958_8249012792556781568_n.jpg?_nc_cat=111&amp;_nc_sid=32a93c&amp;_nc_ohc=HfKElPaRu9sAX9-z3YB&amp;_nc_ht=scontent-hkg4-2.xx&amp;oh=c183fda833cbf56372e1af6fe90a4b17&amp;oe=5F9E35BD" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">PoE 交換器</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">Raspberry Pi 需要電源，門口附近沒有插座，如果不想拉條220V的線到門口或使用拖蘇，可以使用PoE，Power over Ethernet，電力和訊號可以透過同一條網絡線來傳送，網線是用一般的網線即可以，但是還要有一個PoE 交換器才可以，PoE 有兩個標準IEEE 802.3 AF 、IEEE 802.3 AT，IEEE 802.3 AF提供350 ma 電流，Raspberry Pi 使用IEEE 802.3AF，只要交換器兼容IEEE 802.3 AF就可以用。合規的PoE交換器是會自動檢查受電設備是否PoE設備，如果不是就不會傳輸電力，不合規的可能會強行輸出電力給設備，容易燒壞，所以我還是買了較貴的TP-Link PoE 交換器。</div>
<figure class="_2cuy _4nuy _2vxa">
<div class="_h2x _h2y"><figure class="_h2z _297z _usd img"><img loading="lazy" id="u_0_g"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/82337282_10222815920566147_863752042445799424_n.jpg?_nc_cat=107&amp;_nc_sid=32a93c&amp;_nc_ohc=D1d2-SVZGBcAX-3dRBy&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=9fdba3abe7d8c5120552e3c93c2f8bd6&amp;oe=5F9E9080" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">加了 PoE hat 的 Raspberry Pi - GPIO 被擋住了</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa"> </div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_h"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/p720x720/100828216_10222815696760552_8718633931269734400_n.jpg?_nc_cat=107&amp;_nc_sid=32a93c&amp;_nc_ohc=ZkQfrGO1EwAAX9p9_UW&amp;_nc_ht=scontent-hkg4-1.xx&amp;tp=6&amp;oh=ac9c277ea86eff2583fb79f1a3642fbd&amp;oe=5FA0F9B8" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">把它裝在 Raspberry Pi 與 PoE Hat之間，針就會伸出 PoE Hat</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">Raspberry Pi 還需要買個PoE Hat，PoE Hat 裝上去後會盖住 GPIO PIN，為了使用GPIO還要再買延長針，讓GPIO伸出PoE Hat，淘寶上買的這些針相對比較幼，用杜邦線連接的話，可能會出現有時候接觸不靈。</div>
<div class="_2cuy _3dgx _2vxa">硬件上的問題都準備好了，軟件方面以下試過幾個方法，開始的想法是讓我回家到門的時候門就自動開了，這個最後沒找到可靠的實現方法。</div>
<ol class="_5a_q _509r" dir="ltr">
<li class="_2cuy _509s _2vxa">使用人臉辨識Face ID開門，用別人做好的Open CV 模型，可以簡單實現，速度較慢，要幾秒鐘才能識別到，最大的問題是別人用你的照片也能開門。如果用兩個鏡頭，在不同的角度下，應該可以判斷影像是不是3D。</li>
<li class="_2cuy _509s _2vxa">使用 iBeacon 或 eddystone 進行室內定位，Beacon 可以購買或者使用Raspberry Pi 模擬 Beacon，有兩個Beacon的話可以判度出你(手機)走動的方向，是回家還是出門，因為手機 可以跟據接收到的Beacon 訊號的強弱判斷距離，兩個Beacon 放在不同的位置就知道你是從哪個方向來。這就要在手機上做個APP，要做到完全自動的話，APP 必須在背景不停地去偵測Beacon 訊號，這會耗電，手機作業系統應該是不允許的，APP進程會被系統殺掉，Android 可能可以弄幾個進程互相保護，但是也有可能同時被殺掉，就算技術上可行，但也太耗電，還是放弃。IOS 的話，APP可以在手機進入Beacon 範圍的時候，喚醒APP，經過測試後，手機要亮屏的情況下才會喚醒APP，系統也不是每秒鐘檢測Beacon訊號，就是到了門口不一定把上就可以執行開門，而且要拿手機出來讓它亮屏，所以這也行不通。</li>
<li class="_2cuy _509s _2vxa">IOS上有一個叫 "捷徑" （Shortcut）的APP，可以幫你執行一連串的動作，我曾經用它來檢查六合彩頭獎，當頭獎金額超過某個數字，就透過短訊通知某人頭獎金額。以下兩個捷徑是別人做的，你揸車時可以同Siri 講 "附近既私家車位"，那麼該捷徑就會被執行，Sirsi 亦會將結果以語言回覆你"祐漢停車場有1個位"。 附近嘅私家車位<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.icloud.com%2Fshortcuts%2F5593231f3bd3451eb9f6aba1bafd38e3%3Ffbclid%3DIwAR06qKwI_PyLppGwAIX3WxzWw8ZhJHkCwSDcn69FwHw2i0Q9xSTeW243IZY&amp;h=AT3yRVoilTui4uGxbi6d_wcjiUJVj9DVndyB3azUBzLHBqGV93JfmUkIpundcyKpta0WJtmsqYg9GWflPyZfZu5DtME8rdP_epFEAhaIYey6KfJik6KRGipsQVul4_FBp6YeaM3U6o73DzcTRSMYqsrc_hCODuewLV24PA" target="_blank" rel="noopener nofollow" data-lynx-mode="async">https://www.icloud.com/shortcuts/5593231f3bd3451eb9f6aba1bafd38e3</a> 附近嘅電單車位<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.icloud.com%2Fshortcuts%2F9e685652cbb74fa2997ed73f36166a66%3Ffbclid%3DIwAR15jG_BmzYLtKCbpqEwuOjSZ3um6eLT6dLl03a8pM--Xb7OgFI1JZn9FkA&amp;h=AT2JtQOhd0daEuoOLYQJrBC94rYGlepJ7nZ3SLMkCjTl1IPnakkB3GWU9yZgqPrOHIbbsEd_3lDsXo1pk_5Vw-ItKsdJlEREn4gCi0z9qBUlYobKRqwUeVsDEP4i9gzhp2We9knqBdyUkMxOZfa4kCny" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://www.icloud.com/shortcuts/9e685652cbb74fa2997ed73f36166a66</a> 。捷徑亦有一個"自動化"的功能，例如當手機連接某個WI-FI、藍牙抵達或離開某個位置時，就會執行你指定的動作，可惜的是所謂自動化觸發時只是會彈出通知，還是要你手動按執行捷徑。</li>
</ol>
<div class="_2cuy _3dgx _2vxa">最後實現的方法是用Shortcut 執行自動開門，回家的時候叫Siri 開門。</div>
<div class="_2cuy _3dgx _2vxa">參考：</div>
<ul class="_5a_q _5yj1" dir="ltr">
<li class="_2cuy _509q _2vxa"><a href="https://l.facebook.com/l.php?u=http%3A%2F%2Fwiki.labplus.cn%2Findex.php%3Ftitle%3D%25E8%2588%25B5%25E6%259C%25BA%26fbclid%3DIwAR3K-Rd-ZK6D0F0yn_yOjY4MJxgLytnJ-hAc-m6LiSC8ClR11jKJkI2dZX8&amp;h=AT2zTfnHTf6Z_E1-a7n2pCn59QzVKGRJKj82v8LRfrXsD1HSjwkyTy1GnyocCGzKeKzb1r4ZOzifIQ_K-jOTf7t1GTjHdKvMintbP0yx1PeSHHkxo87e4qbojok9WmDRKRll5pnmseRFQaANANeKmZYQ" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">http://wiki.labplus.cn/index.php?title=%E8%88%B5%E6%9C%BA</a></li>
<li class="_2cuy _509q _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.raspberrypi.org%2Fblog%2Fintroducing-power-over-ethernet-poe-hat%2F%3Ffbclid%3DIwAR2aUp6sE55AbGyWWptpegPCXfeLiZx1SjJYP2HwLE5hSLBxiKotZ_2c98Q&amp;h=AT1O-VOcnnMhia2ZMa0I96BueuvbcJUkGbzD9S3e73ydiWScnKkmlzdsTgabBFF3DQSoSbMmaoh0gKk6M31Wmy4L2IJROQmVXm9sbIBiY5tUVH8n0uOBErIt75blBVWorp-B5zgp_mCOK6s2wFxPdSj_" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://www.raspberrypi.org/blog/introducing-power-over-ethernet-poe-hat/</a></li>
<li class="_2cuy _509q _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Ffanzheng.org%2Farchives%2F40%3Ffbclid%3DIwAR2CSvcjfBAGRWyFABVFmIBksfj3bTtTUsxn1_DadcmwUQfwQKcizNW6Cac&amp;h=AT1DJBwI8-m_nPMYTUcE5E-AfPBgc9AehPZF47FEKcyOqujWn4MPKfnjBfc4AMlFcBVXbWLATPQSYuix41BF6ApySri3UCHnJDPT3XpMjubJTdD9To7MCIHgEqYHpg3d6CTvhrL9d-hrhc_jdeGfnde5" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://fanzheng.org/archives/40</a></li>
<li class="_2cuy _509q _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fblog.csdn.net%2FDLW__%2Farticle%2Fdetails%2F85063464%3Ffbclid%3DIwAR3WZFwHcWC1bc73ZP0dv_XmD-1SDyP-Iw1iO0XpptmFA7BHZtkarh1YqDQ&amp;h=AT3vddiischUf0m14Z1zMLaoSz3NJuebRL5igyT5CS7flypI0fFEgTpqix7O9a8Cx6olsDKWFFVQG4IOTMkQhqJqpyt8oavbI40TQq2ranh2qUGiMYsQAt9923taGdm-1-0ohhwZRizJPixQPUifplYE" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">https://blog.csdn.net/DLW__/article/details/85063464</a></li>
<li class="_2cuy _509q _2vxa"><a href="https://blog.everlearn.tw/%e7%95%b6-python-%e9%81%87%e4%b8%8a-raspberry-pi/%e5%9c%a8-raspberry-pi-3-model-b-%e5%88%a9%e7%94%a8-pwm-%e6%8e%a7%e5%88%b6-led-%e4%ba%ae%e5%ba%a6?fbclid=IwAR0io-frGJ0J9gK2Z0ARTtGehVu1MZXcyAYccX9UtA3mZNYurIt2_YzKt-k#comments" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fblog.everlearn.tw%2F%25e7%2595%25b6-python-%25e9%2581%2587%25e4%25b8%258a-raspberry-pi%2F%25e5%259c%25a8-raspberry-pi-3-model-b-%25e5%2588%25a9%25e7%2594%25a8-pwm-%25e6%258e%25a7%25e5%2588%25b6-led-%25e4%25ba%25ae%25e5%25ba%25a6%3Ffbclid%3DIwAR0io-frGJ0J9gK2Z0ARTtGehVu1MZXcyAYccX9UtA3mZNYurIt2_YzKt-k%23comments&amp;h=AT0SZEpGM_T49jK8vhnhEyp1yAWCuePvgs1Mf8oQbbPCCTIKzIwHMXnW3EU2VTJ9BhCPXIyBt5E2TFDVAKGGPmOT0_21jSdMlDfceCt9bTWg52rNyZgMq5ec8D2-sjIawj2-BeKVXYorsATEtzAjY1FQ">https://blog.everlearn.tw/%e7%95%b6-python-%e9%81%87%e4%b8%8a-raspberry-pi/%e5%9c%a8-raspberry-pi-3-model-b-%e5%88%a9%e7%94%a8-pwm-%e6%8e%a7%e5%88%b6-led-%e4%ba%ae%e5%ba%a6?fbclid=IwAR3hQ5kFN984wSRpu3-NzBEHeGVeaqg1odiauYYuizgLDnfBDYWxLoNBkpk#comments</a></li>
</ul>
            ]]>
        </content>
    </entry>
    <entry>
        <title>樹莓派 Raspberry Pi 控制電鎖</title>
        <author>
            <name>Felix Hoi</name>
        </author>
        <link href="https://felixhoi.github.io/felixhoi.github.io/shu-mei-pai-raspberry-pi-kong-zhi-dian-suo.html"/>
        <id>https://felixhoi.github.io/felixhoi.github.io/shu-mei-pai-raspberry-pi-kong-zhi-dian-suo.html</id>
            <category term="智能家居 DIY"/>
            <category term="Raspberry Pi 樹莓派"/>
            <category term="Python"/>
            <category term="Programming 編程"/>

        <updated>2020-10-05T10:05:38+08:00</updated>
            <summary>
                <![CDATA[
                    前一陣子終於把家裡的門鎖改成可以使用手機控制開門，這個計劃的開端始於2018年8月份，一個沒記性的人為什麼記得那麼清楚，因為淘寶上記錄呀。因為這個計劃一直沒實現，所以當我跟某人說我想做什麼新的事情，某人就會酸我之前也說要弄自動開門呀，弄到哪去了⋯⋯2018年的時候搞了一陣子，然後就放棄了。但這件事一直在我心中，所以在某一天就GOOGLE了一下，找到了一篇教學，跟著做就實現了。Raspberry PiRaspberry Pi 是一種單片機，就是電腦主機所需的基本零件都焊在一起的主機，底板上有CPU 、RAM、HDMI接口、LAN接口、WI-FI晶片等等，再插上一張SD就是一台可以運作像手掌大小電腦。除了尺寸外，它和一般家用電腦的區別是它所採用的CPU 架構是ARM，而一般PC是使用X86架構，如果你有下載過作業系統(OS)的安裝檔案，會見過x86(i386)、86_x64、 AMD64 等字眼，x86也是我們常說的32bit OS，x64就是64bit OS。32bit 與 64bit 指的是CPU 的通用寄存器的長度，32bit 的長度就是 2的32次方。在某個年代，我們的Windows xp 是32bit ，OS 最多只能記得2^32/1024/1024/1024=4Gb的地址，但硬體RAM可能會超過4Gb，多出來的就RAM就不能當RAM使用，其中一個方法就把它當做硬盤使用(Ram Disk)，這個Ram Disk 就會比一般的Disk&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <div class="_2cuy _3dgx _2vxa">前一陣子終於把家裡的門鎖改成可以使用手機控制開門，這個計劃的開端始於2018年8月份，一個沒記性的人為什麼記得那麼清楚，因為淘寶上記錄呀。因為這個計劃一直沒實現，所以當我跟某人說我想做什麼新的事情，某人就會酸我之前也說要弄自動開門呀，弄到哪去了⋯⋯2018年的時候搞了一陣子，然後就放棄了。但這件事一直在我心中，所以在某一天就GOOGLE了一下，找到了<a href="https://fanzheng.org/archives/40?fbclid=IwAR2mNg2Qxc6qLDj5TpVyylykwnnnmJxw7jovYrf7YpjbWPCmxXwCPDJ0plI" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Ffanzheng.org%2Farchives%2F40%3Ffbclid%3DIwAR2mNg2Qxc6qLDj5TpVyylykwnnnmJxw7jovYrf7YpjbWPCmxXwCPDJ0plI&amp;h=AT0AnV7Un-gGBJ0sFAbptXEO-T69dJNDqBXx6lFZukESIwsonaTjA2WaOYzx1EO3E2EozQq1DLeE17HQc1vW05TvWiwiNW4IjJzXxnAt0ah3TSf4W42fRgurADhTBbbPeGHZSOxl8rVdH5fWM6pu5Sqy">一篇教學</a>，跟著做就實現了。</div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_c"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/100584423_10222757893395504_6296668337950687232_o.jpg?_nc_cat=109&amp;_nc_sid=32a93c&amp;_nc_ohc=10JjZqO5OTgAX9gg_C8&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=aa39c8c2bd5f312eee252b8ae31a3f15&amp;oe=5F9F3DF5" data-is-external-image="true"  alt="" width="165" height="348"></figure>
<div class="_h2w _50f8 _50f4">Raspberry Pi</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa"><a href="https://www.raspberrypi.org/?fbclid=IwAR25ptH1YS1GsG8wceIMsObC_mXYHcvnNiOad0qmK4NogEuO1eMhrI6Reo0" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.raspberrypi.org%2F%3Ffbclid%3DIwAR25ptH1YS1GsG8wceIMsObC_mXYHcvnNiOad0qmK4NogEuO1eMhrI6Reo0&amp;h=AT1--JGYDW6oStjd6Syr2ES5_eyR5-3HgG22a_LoMyIORgeNSe0BeHaiDnO5hwXZcXYpZBUWhPd9GCW8DwFCS7GqN8vQ2gG5dyiBvgsv_8h5wPR52c72jVXS35SoZkM42akG2bJj8-Of0dkY_TdP5V3K">Raspberry Pi</a> 是一種單片機，就是電腦主機所需的基本零件都焊在一起的主機，底板上有CPU 、RAM、HDMI接口、LAN接口、WI-FI晶片等等，再插上一張SD就是一台可以運作像手掌大小電腦。除了尺寸外，它和一般家用電腦的區別是它所採用的CPU 架構是ARM，而一般PC是使用X86架構，如果你有下載過作業系統(OS)的安裝檔案，會見過x86(i386)、86_x64、 AMD64 等字眼，x86也是我們常說的32bit OS，x64就是64bit OS。32bit 與 64bit 指的是CPU 的通用寄存器的長度，32bit 的長度就是 2的32次方。在某個年代，我們的Windows xp 是32bit ，OS 最多只能記得2^32/1024/1024/1024=4Gb的地址，但硬體RAM可能會超過4Gb，多出來的就RAM就不能當RAM使用，其中一個方法就把它當做硬盤使用(Ram Disk)，這個Ram Disk 就會比一般的Disk 飛快了許多，缺點就是儲存在RAM Disk 上的重新開機就沒了，所以必須把RAM Disk 的資料同步到真正的硬盤上，或者可以把虛擬記憶體放到RAM Disk 裡。越說越遠了⋯⋯</div>
<div> </div>
<div class="_2cuy _3dgx _2vxa">然而，基於x86 架構的OS是不能在ARM 硬體上運行的，所以Raspberry Pi 必須安裝支持ARM的作業系統。Raspberry Pi 有官方基於 Linux 的作業系統，安裝也十分方便，官網都有詳細的教學，很適合我們這種小白學習。</div>
<div class="_2cuy _3dgx _2vxa">ARM其中一個優點是功耗低很多，所以我們大多數手機也是使用ARM CPU，所以Raspberry Pi 的優點就是功耗低囉？是沒錯，但它還有另外一個強大的Function 啦，就是上圖無名指和尾指旁邊的兩排針，它們叫做<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2FGPIO%3Ffbclid%3DIwAR3wcIyVdF-YxSPGyQMxRc0sNAOfuHZRCHpPOu1t1I8hFmpgbiqjr2Dt2lU&amp;h=AT2MZHMITFAVXntLHTMBB2kf2dOdo3gCgYQJ1LEzxWEQwKjEq84Lj5jT2l6ANTvUXQdJFV4aQsE_plt0vWQRJguKaHfnoROe_lsY1avSXz2g80F0UghK3crb0WiCDMoo6ej5ft-nWGpYHwbGvyDwVnVo" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">GPIO</a>，General Purpose Input Out，它是可以用來給其他裝置供電或控制其他裝置，比例控制門鎖，傳感器，淘寶上有一大堆Raspberry Pi 的傳感器，例如溫度、濕度、紅外線、人體感應，都很便宜。供電的電壓有5v 和 3.3 V，也可以與裝置互動，進行傳送和接收資料。也可以使用繼電器來控制220 V電器，讓220V的電器通電或不通電。還有就是Raspberry Pi 價格300塊人民幣就可以買到了。</div>
<h3 class="_2cuy _50a1 _2vxa">第一次嘗試</h3>
<div class="_2cuy _3dgx _2vxa">一開始的想法是買個電鎖和Raspberry Pi，Raspberry Pi 控制電鎖開門。要準備的東西有：</div>
<ol class="_5a_q _509r" dir="ltr">
<li class="_2cuy _509s _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fm.tb.cn%2Fh.VP4CVaX%3Fsm%3De20237%26fbclid%3DIwAR36Vi70XUjj1WFVQZ8UC1p5ysWleBTT-6fDQWaqGNigCitDqNolxJuF-hk&amp;h=AT1ZZJxPev4p1vl62v98w-0ByzyAyyZ2MKWMmoywglj5trdZ_yQKwJxt4m2vkgIZiK6aDpuLoLZEuAQKK6ZgdcE9PscGguVDvuKGqCHw5h9NEpopfCpLgJw8ZBzj79qZ1bKvrdoPvWX2qxXQP0JN0aLC" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">電鎖</a></li>
<li class="_2cuy _509s _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fm.tb.cn%2Fh.VOb0Zip%3Fsm%3D49cdcf%26fbclid%3DIwAR164vqvSWE_ZvPd4g4HR4tAr7E1OSa7ypNmzb_eIxF5PHPZj5lzVI2qFQw&amp;h=AT1dKuOiUPJyp67q5_lydXGsMeKpWzABHidVGg38KFFeccQseKyyqN3lawXr9RnnaTqqOLKRBwv4v5iOHij_P6cb_KLDvZEARbnA7-kgnvYUp8dDWwmdhoDH6VJwzqCIGiT40oiVmMnGOhvLBV_EhJ5Y" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">電鎖專用電源</a></li>
<li class="_2cuy _509s _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fm.tb.cn%2Fh.VPxvxkj%3Fsm%3Db8b262%26fbclid%3DIwAR1c5mnunow7-Jpw-w3Ijuzlj4QT6pyAulCQ9AGmjZyLbiKcD4-TyTy2PhM&amp;h=AT1OYSHg7rXfysu-Y_6pMX6PyTzOq1bJ-LCfNpazC4uLuzTLYenReMsw8-LtR_0t9UAc5NKur4HYHmYHiP5poQnRAl1GPGd3lyQx7_vWZYyiwQYOrnDVraYRfpGSUe2DKPMCJMS4c5ZPVHoXFd17DPVI" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">Raspberry Pi </a></li>
<li class="_2cuy _509s _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fm.tb.cn%2Fh.VPxvnkQ%3Fsm%3Deee212%26fbclid%3DIwAR3CDP5onISQ6TNO7PFrikQZoNRlHBvBK5VMegdwB29xGBhBcRpXnWzTMH8&amp;h=AT2iDbkRgXKFz5t5r2RsSrV0NRMIJEQbL93VXoTDEAwt92SZvZ27nb2J7BDTDg4vSg0koRtXZSccaPUnetW9qVAdp8QJ_8MDwPieReydK63gbhVoQZ7E0gDMVVxk793ZI4RlQe7Erl9Yh2kgrMGdE1P_" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">繼電器</a></li>
</ol>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_d"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/98291318_10222757915756063_6292440810231169024_n.jpg?_nc_cat=109&amp;_nc_sid=32a93c&amp;_nc_ohc=JBR2UpnleAIAX-nWkiy&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=9c17d7a7898de3ef1699946d16a1819d&amp;oe=5F9EB870" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">繼電器 Relay</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa"><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E7%25BB%25A7%25E7%2594%25B5%25E5%2599%25A8%3Ffbclid%3DIwAR2BIONohjkfnDPlHO2fGXQsYeAhWpWHedu_DoP3Cb5e_0W1wkmpCBsJKeY&amp;h=AT0QS3HScwrtu1ivsddbtSlG_kzcJOYONVIafruENUfFHHRRkaPtuyX3-IRNRAozbyOGeU9P7lhHUftqI7EibJDVGUnC_kak8rkY76BctDsp6li4UPtovd4IL1U6f-T5gL1ch8f-wKf7b6Hvvra3PfIw" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">繼電器</a>可以使小電流控制大電源的開關，並且將兩段電路隔離。Raspberry Pi GPIO 輸出電壓最大是5V，而電鎖是使用12V，用Raspberry Pi GPIO 不能直接控制電鎖，所以我們使用繼電器。購買繼電器需要注意參數，右圖最上面標示的12VDC是繼電器工作電壓，給Rasphberry Pi 用要買5V。下面三個電壓是繼電器可以控制的電壓，DC 沒有標示，這款是30VDC。光耦繼電器反應比較慢，跳轉開合需要一兩秒時間，可以選用固態繼電器，購買要留意能否控制DC 電流，淘寶沒能找到可以控制DC的，只有控制AC。</div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_e"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/p720x720/98297446_10222757922916242_611323212298452992_o.jpg?_nc_cat=103&amp;_nc_sid=32a93c&amp;_nc_ohc=xETN72Cu2vgAX8HVe8y&amp;_nc_ht=scontent-hkg4-1.xx&amp;tp=6&amp;oh=4636d913c8c53a805eba80ed871862f9&amp;oe=5F9E84DA" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">電鎖專用電源接線圖</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">電鎖專用電源也內置了一個繼電器，用來控制電鎖，所以整個聯動控制是 Raspbery Pi -&gt; 繼電器-&gt; 電鎖專用電源(繼電器)-&gt;電鎖。繼電器一般都會有三個接口</div>
<ul class="_5a_q _5yj1" dir="ltr">
<li class="_2cuy _509q _2vxa">NC(Normal Close) 繼電器在收到觸發訊號前NC 與COM是接通的，觸發後就是斷開的。</li>
<li class="_2cuy _509q _2vxa">NO(Normal Open)繼電器在收到觸發訊號前NO與COM是斷開的，觸發後就是接通的。</li>
<li class="_2cuy _509q _2vxa">COM(Common) NC 和 NO 的共同觸點</li>
<li class="_2cuy _509q _2vxa">觸發訊號在樹莓派連接的繼電器可以使用高電平(即1)，或者低電平(即0)。電鎖專用電源，我們使用PUSH 和GND，只要PUSH 和 GND 接通了（開關按鈕原理），電鎖專用電源的繼電器就會被觸發。</li>
</ul>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_f"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/p720x720/100514838_10222757931756463_8204290427679932416_o.jpg?_nc_cat=100&amp;_nc_sid=32a93c&amp;_nc_ohc=orJYP4j0eYMAX_z2-ii&amp;_nc_ht=scontent-hkg4-1.xx&amp;tp=6&amp;oh=2c9dcbbc3d8a318d740256241cec80aa&amp;oe=5FA0D721" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">電鎖接線</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa"> </div>
<div class="_2cuy _3dgx _2vxa">這裡選用了A方法接線。B方法看不明白該怎麼接。</div>
<div class="_2cuy _3dgx _2vxa"> </div>
<div class="_2cuy _3dgx _2vxa"> </div>
<figure class="_2cuy _4nuy _2vxa _3tvj">
<div class="_h2x _h2y _4lh3"><figure class="_h2z _297z _4lh5 img"><img loading="lazy" id="u_0_g"  src="https://scontent-hkg4-1.xx.fbcdn.net/v/t1.0-9/99152420_10222757938956643_8671905288384675840_n.jpg?_nc_cat=109&amp;_nc_sid=32a93c&amp;_nc_ohc=60Nq-r3FiI0AX_R3haY&amp;_nc_ht=scontent-hkg4-1.xx&amp;oh=d7490c1e91a2c70c03868ab059da70c1&amp;oe=5FA04ED6" data-is-external-image="true"  alt=""></figure>
<div class="_h2w _50f8 _50f4">整體接線圖</div>
</div>
</figure>
<div class="_2cuy _3dgx _2vxa">Raspberry Pi 5V 、GND 接繼電器DC＋、DC- 給繼電器提供電源（電力），<a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.raspberrypi.org%2Fdocumentation%2Fusage%2Fgpio%2F%3Ffbclid%3DIwAR2Mk1Pq-TAAU2BZOqCHPloctQxj4vkVzNdyqde0SYsldHEH230Vd43cSHo&amp;h=AT3RO_8ZvFxm6MOOPgpkXM0maSe4dPuSfdVcH53BgYGZ_3wfW5qCjxDUwVSjtLrQ5bNaAEFoh0EQARa4ToStsEig3ri0oU6ic-zsHS8QfMQNjcsGOkGdWBhQLIn3HXJ-XXqD0Pi1MuEtfEY_8V9HUcrY" target="_blank" rel="noopener nofollow" data-lynx-mode="asynclazy">GPIO</a>(隨便找一個就可以，這裡使GPIO 17 物理編號PIN 11)接IN，GPIO發送低電平訊號給IN，就會觸發繼電器吸合，使NO和COM接通，然後電鎖專用電源的Push 和GND就會接通，再觸發電源繼電器吸合，使NO和GND接通（0～10秒可調，有延時功能）並輸出電壓訊號至電鎖L+ 和GND，使電鎖開門。電源＋12、GND連接電鎖12V、GND給電鎖提供工作電壓（電力）。</div>
<div class="_2cuy _3dgx _2vxa">最後附上python 代碼</div>
<pre class="_19ik" dir="ltr"><span class="_2cuy _19ii _2vxa"><span class="_4yxo">#!/usr/bin/env python<br></span></span><span class="_2cuy _19ii _2vxa"><span class="_4yxo">import</span> RPi.GPIO <span class="_4yxo">as</span> GPIO</span><span class="_2cuy _19ii _2vxa"><span class="_4yxo">import</span> <br>time</span><span class="_2cuy _19ii _2vxa">RelayPin = 11</span><span class="_2cuy _19ii _2vxa">GPIO.setmode(GPIO.BOARD)<br></span><span class="_2cuy _19ii _2vxa">GPIO.setup(RelayPin, GPIO.OUT)<br></span><span class="_2cuy _19ii _2vxa">time.sleep(1)<br></span><span class="_2cuy _19ii _2vxa">GPIO.output(RelayPin, GPIO.LOW)<br></span><span class="_2cuy _19ii _2vxa">time.sleep(1)<br></span><span class="_2cuy _19ii _2vxa">GPIO.output(RelayPin, GPIO.HIGHDIY </span><span class="_2cuy _19ii _2vxa">time.sleep(1)</span><span class="_2cuy _19ii _2vxa">GPIO.cleanup()</span></pre>
<div class="_2cuy _3dgx _2vxa">實際上我並沒有使用這個方案，因為家裡的門要改用上電鎖，不太合適，難度太高放棄了。最後使用的是本文開頭提及GOOGLE找到的一個方案。</div>
            ]]>
        </content>
    </entry>
</feed>
